<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ANALYTICS_IMPLEMENTATION_GUIDE</title>
    <style>
        body {
            font-family: 'Calibri', 'Arial', sans-serif;
            line-height: 1.6;
            max-width: 8.5in;
            margin: 1in auto;
            padding: 0 0.5in;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            font-size: 2em;
            margin-top: 1em;
        }
        h2 {
            color: #34495e;
            border-bottom: 2px solid #95a5a6;
            padding-bottom: 8px;
            margin-top: 1.5em;
            font-size: 1.5em;
        }
        h3 {
            color: #34495e;
            margin-top: 1.2em;
            font-size: 1.3em;
        }
        h4 {
            color: #555;
            margin-top: 1em;
            font-size: 1.1em;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        pre code {
            background: none;
            padding: 0;
        }
        strong {
            color: #2c3e50;
            font-weight: bold;
        }
        em {
            font-style: italic;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        ul, ol {
            margin: 10px 0;
            padding-left: 30px;
        }
        li {
            margin: 5px 0;
        }
        blockquote {
            border-left: 4px solid #3498db;
            padding-left: 20px;
            margin: 20px 0;
            color: #555;
            font-style: italic;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        p {
            margin: 1em 0;
        }
        .page-break {
            page-break-after: always;
        }
        @media print {
            body {
                margin: 0;
                padding: 0.5in;
            }
        }
    </style>
</head>
<body>
<h1>Analytics Dashboard - Implementation Guide</h1><br><br><h2>Current Status</h2><br><br>‚úÖ <strong>Backend:</strong> 7 analytics endpoints ready and running<br>‚úÖ <strong>Chart.js:</strong> Library loaded and ready<br>‚è≥ <strong>Frontend:</strong> Need to build analytics dashboard component<br><br>---<br><br><h2>Quick Implementation Summary</h2><br><br><h3>What's Been Completed:</h3><br><br><ul><li><strong>7 Analytics Endpoints</strong> running on http://localhost:3001:</li></ul><br>   - <code>/api/analytics/overview</code> - Executive metrics<br>   - <code>/api/analytics/spending-trend</code> - Time series data<br>   - <code>/api/analytics/department-breakdown</code> - Department spending<br>   - <code>/api/analytics/approval-flow</code> - Funnel data<br>   - <code>/api/analytics/duration</code> - Processing times<br>   - <code>/api/analytics/status-distribution</code> - Status breakdown<br>   - <code>/api/analytics/top-vendors</code> - Vendor rankings<br><br><ul><li><strong>Chart.js 4.4.0</strong> - Loaded in index.html</li></ul><br><br><ul><li><strong>Theme System</strong> - Light/dark mode ready</li></ul><br><br><h3>What Needs to Be Built:</h3><br><br>The current <code>Reports</code> component (starting around line 3150 in app.js) shows basic statistics. We need to replace/enhance it with:<br><br><ul><li><strong>Enhanced Analytics Component</strong> with:</li></ul><br>   - API integration for all 7 endpoints<br>   - Interactive Chart.js visualizations<br>   - Date range filtering<br>   - Department filtering<br>   - Period selection (daily/weekly/monthly)<br><br><ul><li><strong>Chart Components:</strong></li></ul><br>   - Spending Trend Line Chart<br>   - Department Pie Chart<br>   - Status Donut Chart<br>   - Approval Funnel Chart<br>   - Duration Bar Chart<br>   - Vendor Rankings<br><br><ul><li><strong>Filter Panel:</strong></li></ul><br>   - Date range picker<br>   - Department selector<br>   - Period toggle<br>   - Export buttons<br><br>---<br><br><h2>Implementation Approach</h2><br><br><h3>Option 1: Replace Existing Reports Component (Recommended)</h3><br><br><strong>Location:</strong> <code>frontend/app.js</code> around line 3150<br><br><strong>Steps:</strong><br><ul><li>Add analytics API methods to the <code>api</code> object</li></ul><br><ul><li>Create new <code>AnalyticsDashboard</code> component</li></ul><br><ul><li>Replace <code>Reports</code> component or add new menu item</li></ul><br><ul><li>Build chart rendering functions</li></ul><br><ul><li>Add filtering logic</li></ul><br><br><h3>Option 2: Create Separate Analytics View</h3><br><br><strong>Steps:</strong><br><ul><li>Add new menu item "Analytics" (separate from "Reports")</li></ul><br><ul><li>Create <code>AnalyticsDashboard</code> component</li></ul><br><ul><li>Finance/MD/Admin only access</li></ul><br><ul><li>Full-featured with all charts</li></ul><br><br>---<br><br><h2>Code Structure Needed</h2><br><br><h3>1. API Methods (Add to <code>api</code> object)</h3><br><br><pre><code>javascript<br>// Around line 700-800 in app.js, add to api object:<br><br>analytics: {<br>  getOverview: async (filters = {}) => {<br>    const params = new URLSearchParams(filters);<br>    const res = await fetchWithAuth(<code>${API_URL}/analytics/overview?${params}</code>);<br>    if (!res.ok) throw new Error('Failed to fetch overview');<br>    return res.json();<br>  },<br><br>  getSpendingTrend: async (filters = {}) => {<br>    const params = new URLSearchParams(filters);<br>    const res = await fetchWithAuth(<code>${API_URL}/analytics/spending-trend?${params}</code>);<br>    if (!res.ok) throw new Error('Failed to fetch spending trend');<br>    return res.json();<br>  },<br><br>  getDepartmentBreakdown: async (filters = {}) => {<br>    const params = new URLSearchParams(filters);<br>    const res = await fetchWithAuth(<code>${API_URL}/analytics/department-breakdown?${params}</code>);<br>    if (!res.ok) throw new Error('Failed to fetch department breakdown');<br>    return res.json();<br>  },<br><br>  getApprovalFlow: async (filters = {}) => {<br>    const params = new URLSearchParams(filters);<br>    const res = await fetchWithAuth(<code>${API_URL}/analytics/approval-flow?${params}</code>);<br>    if (!res.ok) throw new Error('Failed to fetch approval flow');<br>    return res.json();<br>  },<br><br>  getDuration: async (filters = {}) => {<br>    const params = new URLSearchParams(filters);<br>    const res = await fetchWithAuth(<code>${API_URL}/analytics/duration?${params}</code>);<br>    if (!res.ok) throw new Error('Failed to fetch duration');<br>    return res.json();<br>  },<br><br>  getStatusDistribution: async (filters = {}) => {<br>    const params = new URLSearchParams(filters);<br>    const res = await fetchWithAuth(<code>${API_URL}/analytics/status-distribution?${params}</code>);<br>    if (!res.ok) throw new Error('Failed to fetch status distribution');<br>    return res.json();<br>  },<br><br>  getTopVendors: async (filters = {}) => {<br>    const params = new URLSearchParams(filters);<br>    const res = await fetchWithAuth(<code>${API_URL}/analytics/top-vendors?${params}</code>);<br>    if (!res.ok) throw new Error('Failed to fetch top vendors');<br>    return res.json();<br>  }<br>}<br></code></pre><br><br><h3>2. Chart Helper Functions</h3><br><br><pre><code>javascript<br>// Add before component definitions<br><br>// Get theme-aware colors<br>const getChartColors = () => {<br>  const theme = getTheme();<br>  return {<br>    primary: '#0070AF',<br>    secondary: '#58A6D0',<br>    light: '#D0E3F2',<br>    success: '#10B981',<br>    warning: '#F59E0B',<br>    danger: '#EF4444',<br>    info: '#3B82F6',<br>    grid: theme === 'dark' ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',<br>    text: theme === 'dark' ? '#F1F5F9' : '#1E293B'<br>  };<br>};<br><br>// Create line chart<br>const createLineChart = (canvasId, data, options = {}) => {<br>  const ctx = document.getElementById(canvasId);<br>  if (!ctx) return null;<br><br>  const colors = getChartColors();<br><br>  return new Chart(ctx, {<br>    type: 'line',<br>    data: {<br>      labels: data.labels,<br>      datasets: data.datasets.map((dataset, index) => ({<br>        ...dataset,<br>        borderColor: dataset.borderColor || [colors.primary, colors.warning, colors.danger][index],<br>        backgroundColor: dataset.backgroundColor || 'transparent',<br>        tension: 0.4<br>      }))<br>    },<br>    options: {<br>      responsive: true,<br>      maintainAspectRatio: false,<br>      plugins: {<br>        legend: {<br>          labels: { color: colors.text }<br>        },<br>        tooltip: {<br>          mode: 'index',<br>          intersect: false<br>        }<br>      },<br>      scales: {<br>        y: {<br>          beginAtZero: true,<br>          grid: { color: colors.grid },<br>          ticks: { color: colors.text }<br>        },<br>        x: {<br>          grid: { color: colors.grid },<br>          ticks: { color: colors.text }<br>        }<br>      },<br>      ...options<br>    }<br>  });<br>};<br><br>// Create pie/doughnut chart<br>const createPieChart = (canvasId, data, type = 'pie') => {<br>  const ctx = document.getElementById(canvasId);<br>  if (!ctx) return null;<br><br>  const colors = getChartColors();<br>  const chartColors = [<br>    colors.primary,<br>    colors.secondary,<br>    colors.light,<br>    colors.success,<br>    colors.warning,<br>    colors.danger,<br>    colors.info<br>  ];<br><br>  return new Chart(ctx, {<br>    type: type,<br>    data: {<br>      labels: data.labels,<br>      datasets: [{<br>        data: data.values,<br>        backgroundColor: chartColors,<br>        borderWidth: 2,<br>        borderColor: 'var(--bg-primary)'<br>      }]<br>    },<br>    options: {<br>      responsive: true,<br>      maintainAspectRatio: false,<br>      plugins: {<br>        legend: {<br>          position: 'right',<br>          labels: { color: colors.text, padding: 15 }<br>        },<br>        tooltip: {<br>          callbacks: {<br>            label: (context) => {<br>              const label = context.label || '';<br>              const value = context.parsed || 0;<br>              const total = context.dataset.data.reduce((a, b) => a + b, 0);<br>              const percentage = ((value / total) * 100).toFixed(1);<br>              return <code>${label}: ${value.toLocaleString()} (${percentage}%)</code>;<br>            }<br>          }<br>        }<br>      }<br>    }<br>  });<br>};<br><br>// Create bar chart<br>const createBarChart = (canvasId, data, options = {}) => {<br>  const ctx = document.getElementById(canvasId);<br>  if (!ctx) return null;<br><br>  const colors = getChartColors();<br><br>  return new Chart(ctx, {<br>    type: 'bar',<br>    data: {<br>      labels: data.labels,<br>      datasets: data.datasets.map((dataset, index) => ({<br>        ...dataset,<br>        backgroundColor: dataset.backgroundColor || colors.primary,<br>        borderColor: dataset.borderColor || colors.primary,<br>        borderWidth: 1<br>      }))<br>    },<br>    options: {<br>      responsive: true,<br>      maintainAspectRatio: false,<br>      plugins: {<br>        legend: {<br>          labels: { color: colors.text }<br>        }<br>      },<br>      scales: {<br>        y: {<br>          beginAtZero: true,<br>          grid: { color: colors.grid },<br>          ticks: { color: colors.text }<br>        },<br>        x: {<br>          grid: { display: false },<br>          ticks: { color: colors.text }<br>        }<br>      },<br>      ...options<br>    }<br>  });<br>};<br></code></pre><br><br><h3>3. Analytics Dashboard Component Structure</h3><br><br><pre><code>javascript<br>function AnalyticsDashboard({ user }) {<br>  const [loading, setLoading] = useState(true);<br>  const [filters, setFilters] = useState({<br>    dateFrom: '',<br>    dateTo: '',<br>    department: '',<br>    period: 'monthly'<br>  });<br><br>  const [overview, setOverview] = useState(null);<br>  const [spendingTrend, setSpendingTrend] = useState(null);<br>  const [departments, setDepartments] = useState(null);<br>  const [approvalFlow, setApprovalFlow] = useState(null);<br>  const [duration, setDuration] = useState(null);<br>  const [statusDist, setStatusDist] = useState(null);<br>  const [topVendors, setTopVendors] = useState(null);<br><br>  const [charts, setCharts] = useState({});<br><br>  useEffect(() => {<br>    loadAnalytics();<br>  }, [filters]);<br><br>  useEffect(() => {<br>    // Destroy charts on unmount<br>    return () => {<br>      Object.values(charts).forEach(chart => {<br>        if (chart) chart.destroy();<br>      });<br>    };<br>  }, []);<br><br>  const loadAnalytics = async () => {<br>    setLoading(true);<br>    try {<br>      const filterParams = {};<br>      if (filters.dateFrom) filterParams.dateFrom = filters.dateFrom;<br>      if (filters.dateTo) filterParams.dateTo = filters.dateTo;<br>      if (filters.department) filterParams.department = filters.department;<br>      if (filters.period) filterParams.period = filters.period;<br><br>      const [<br>        overviewData,<br>        trendData,<br>        deptData,<br>        flowData,<br>        durationData,<br>        statusData,<br>        vendorData<br>      ] = await Promise.all([<br>        api.analytics.getOverview(filterParams),<br>        api.analytics.getSpendingTrend(filterParams),<br>        api.analytics.getDepartmentBreakdown(filterParams),<br>        api.analytics.getApprovalFlow(filterParams),<br>        api.analytics.getDuration(filterParams),<br>        api.analytics.getStatusDistribution(filterParams),<br>        api.analytics.getTopVendors({ ...filterParams, limit: 5 })<br>      ]);<br><br>      setOverview(overviewData);<br>      setSpendingTrend(trendData);<br>      setDepartments(deptData);<br>      setApprovalFlow(flowData);<br>      setDuration(durationData);<br>      setStatusDist(statusData);<br>      setTopVendors(vendorData);<br><br>      // Render charts after data loads<br>      setTimeout(() => renderCharts(), 100);<br><br>    } catch (error) {<br>      console.error('Error loading analytics:', error);<br>      alert('Failed to load analytics data');<br>    } finally {<br>      setLoading(false);<br>    }<br>  };<br><br>  const renderCharts = () => {<br>    // Destroy existing charts<br>    Object.values(charts).forEach(chart => {<br>      if (chart) chart.destroy();<br>    });<br><br>    const newCharts = {};<br><br>    // Spending Trend Line Chart<br>    if (spendingTrend && spendingTrend.data) {<br>      newCharts.spendingTrend = createLineChart('spendingTrendChart', {<br>        labels: spendingTrend.data.map(d => d.period),<br>        datasets: [<br>          {<br>            label: 'Approved',<br>            data: spendingTrend.data.map(d => d.approved),<br>            borderColor: '#10B981'<br>          },<br>          {<br>            label: 'Pending',<br>            data: spendingTrend.data.map(d => d.pending),<br>            borderColor: '#F59E0B'<br>          },<br>          {<br>            label: 'Rejected',<br>            data: spendingTrend.data.map(d => d.rejected),<br>            borderColor: '#EF4444'<br>          }<br>        ]<br>      });<br>    }<br><br>    // Department Pie Chart<br>    if (departments && departments.length > 0) {<br>      newCharts.departments = createPieChart('departmentChart', {<br>        labels: departments.map(d => d.department),<br>        values: departments.map(d => d.total_amount || 0)<br>      }, 'doughnut');<br>    }<br><br>    // Status Distribution<br>    if (statusDist && statusDist.length > 0) {<br>      newCharts.status = createPieChart('statusChart', {<br>        labels: statusDist.map(s => s.status),<br>        values: statusDist.map(s => s.count)<br>      }, 'doughnut');<br>    }<br><br>    // Duration Bar Chart<br>    if (duration) {<br>      newCharts.duration = createBarChart('durationChart', {<br>        labels: ['HOD', 'Procurement', 'Finance', 'MD'],<br>        datasets: [{<br>          label: 'Average Days',<br>          data: [<br>            duration.hod_stage || 0,<br>            duration.procurement_stage || 0,<br>            duration.finance_stage || 0,<br>            duration.md_stage || 0<br>          ],<br>          backgroundColor: [<br>            duration.hod_stage > 2 ? '#EF4444' : '#10B981',<br>            duration.procurement_stage > 3 ? '#EF4444' : '#10B981',<br>            duration.finance_stage > 1 ? '#EF4444' : '#10B981',<br>            duration.md_stage > 1 ? '#EF4444' : '#10B981'<br>          ]<br>        }]<br>      }, {<br>        indexAxis: 'y'<br>      });<br>    }<br><br>    setCharts(newCharts);<br>  };<br><br>  // Component JSX structure here...<br>  // (see next section)<br>}<br></code></pre><br><br><h3>4. Component Render Structure</h3><br><br><pre><code>javascript<br>return React.createElement('div', {<br>  className: "space-y-6",<br>  style: { minHeight: '100vh' }<br>},<br>  // Header<br>  React.createElement('div', {<br>    className: "flex items-center justify-between"<br>  },<br>    React.createElement('h2', {<br>      className: "text-3xl font-bold transition-colors",<br>      style: { color: 'var(--text-primary)' }<br>    }, "üìä Analytics Dashboard"),<br>    React.createElement(ThemeToggle)<br>  ),<br><br>  // Filter Panel<br>  React.createElement('div', {<br>    className: "p-6 rounded-lg transition-colors",<br>    style: {<br>      backgroundColor: 'var(--bg-primary)',<br>      borderColor: 'var(--border-color)',<br>      boxShadow: 'var(--shadow-md)'<br>    }<br>  },<br>    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-4 gap-4" },<br>      // Date From<br>      React.createElement('div', null,<br>        React.createElement('label', {<br>          className: "block text-sm font-medium mb-2 transition-colors",<br>          style: { color: 'var(--text-secondary)' }<br>        }, "Date From"),<br>        React.createElement('input', {<br>          type: "date",<br>          value: filters.dateFrom,<br>          onChange: (e) => setFilters({...filters, dateFrom: e.target.value}),<br>          className: "w-full px-3 py-2 border rounded-lg transition-colors"<br>        })<br>      ),<br>      // Date To<br>      React.createElement('div', null,<br>        React.createElement('label', {<br>          className: "block text-sm font-medium mb-2 transition-colors",<br>          style: { color: 'var(--text-secondary)' }<br>        }, "Date To"),<br>        React.createElement('input', {<br>          type: "date",<br>          value: filters.dateTo,<br>          onChange: (e) => setFilters({...filters, dateTo: e.target.value}),<br>          className: "w-full px-3 py-2 border rounded-lg transition-colors"<br>        })<br>      ),<br>      // Department<br>      React.createElement('div', null,<br>        React.createElement('label', {<br>          className: "block text-sm font-medium mb-2 transition-colors",<br>          style: { color: 'var(--text-secondary)' }<br>        }, "Department"),<br>        React.createElement('select', {<br>          value: filters.department,<br>          onChange: (e) => setFilters({...filters, department: e.target.value}),<br>          className: "w-full px-3 py-2 border rounded-lg transition-colors"<br>        },<br>          React.createElement('option', { value: "" }, "All Departments"),<br>          React.createElement('option', { value: "Operations" }, "Operations"),<br>          React.createElement('option', { value: "Finance" }, "Finance"),<br>          React.createElement('option', { value: "IT" }, "IT"),<br>          React.createElement('option', { value: "HR" }, "HR"),<br>          React.createElement('option', { value: "Procurement" }, "Procurement")<br>        )<br>      ),<br>      // Period<br>      React.createElement('div', null,<br>        React.createElement('label', {<br>          className: "block text-sm font-medium mb-2 transition-colors",<br>          style: { color: 'var(--text-secondary)' }<br>        }, "Period"),<br>        React.createElement('select', {<br>          value: filters.period,<br>          onChange: (e) => setFilters({...filters, period: e.target.value}),<br>          className: "w-full px-3 py-2 border rounded-lg transition-colors"<br>        },<br>          React.createElement('option', { value: "daily" }, "Daily"),<br>          React.createElement('option', { value: "weekly" }, "Weekly"),<br>          React.createElement('option', { value: "monthly" }, "Monthly")<br>        )<br>      )<br>    )<br>  ),<br><br>  // KPI Cards<br>  overview && React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" },<br>    // Total Spend<br>    React.createElement('div', {<br>      className: "p-6 rounded-lg transition-colors",<br>      style: {<br>        backgroundColor: '#D0E3F2',<br>        borderColor: '#0070AF'<br>      }<br>    },<br>      React.createElement('p', {<br>        className: "text-sm font-medium mb-2",<br>        style: { color: '#0070AF' }<br>      }, "Total Spend"),<br>      React.createElement('p', {<br>        className: "text-3xl font-bold",<br>        style: { color: '#0070AF' }<br>      }, <code>ZMW ${(overview.totalSpend || 0).toLocaleString()}</code>)<br>    ),<br>    // Avg Processing Time<br>    React.createElement('div', {<br>      className: "p-6 rounded-lg transition-colors",<br>      style: {<br>        backgroundColor: '#D1FAE5',<br>        borderColor: '#10B981'<br>      }<br>    },<br>      React.createElement('p', {<br>        className: "text-sm font-medium mb-2",<br>        style: { color: '#10B981' }<br>      }, "Avg Processing Time"),<br>      React.createElement('p', {<br>        className: "text-3xl font-bold",<br>        style: { color: '#10B981' }<br>      }, <code>${(overview.avgProcessingTime || 0).toFixed(1)} days</code>)<br>    ),<br>    // Approval Rate<br>    React.createElement('div', {<br>      className: "p-6 rounded-lg transition-colors",<br>      style: {<br>        backgroundColor: '#FEF3C7',<br>        borderColor: '#F59E0B'<br>      }<br>    },<br>      React.createElement('p', {<br>        className: "text-sm font-medium mb-2",<br>        style: { color: '#F59E0B' }<br>      }, "Approval Rate"),<br>      React.createElement('p', {<br>        className: "text-3xl font-bold",<br>        style: { color: '#F59E0B' }<br>      }, <code>${overview.totalRequisitions > 0 ? ((overview.completedRequisitions / overview.totalRequisitions) * 100).toFixed(1) : 0}%</code>)<br>    ),<br>    // Active Requisitions<br>    React.createElement('div', {<br>      className: "p-6 rounded-lg transition-colors",<br>      style: {<br>        backgroundColor: '#E0E7FF',<br>        borderColor: '#3B82F6'<br>      }<br>    },<br>      React.createElement('p', {<br>        className: "text-sm font-medium mb-2",<br>        style: { color: '#3B82F6' }<br>      }, "Active Requisitions"),<br>      React.createElement('p', {<br>        className: "text-3xl font-bold",<br>        style: { color: '#3B82F6' }<br>      }, overview.pendingRequisitions || 0)<br>    )<br>  ),<br><br>  // Charts Grid<br>  !loading && React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-2 gap-6" },<br>    // Spending Trend<br>    React.createElement('div', {<br>      className: "p-6 rounded-lg transition-colors",<br>      style: {<br>        backgroundColor: 'var(--bg-primary)',<br>        borderColor: 'var(--border-color)',<br>        boxShadow: 'var(--shadow-md)'<br>      }<br>    },<br>      React.createElement('h3', {<br>        className: "text-xl font-bold mb-4 transition-colors",<br>        style: { color: 'var(--text-primary)' }<br>      }, "üìà Spending Trend"),<br>      React.createElement('div', { style: { height: '300px' } },<br>        React.createElement('canvas', { id: "spendingTrendChart" })<br>      )<br>    ),<br><br>    // Department Breakdown<br>    React.createElement('div', {<br>      className: "p-6 rounded-lg transition-colors",<br>      style: {<br>        backgroundColor: 'var(--bg-primary)',<br>        borderColor: 'var(--border-color)',<br>        boxShadow: 'var(--shadow-md)'<br>      }<br>    },<br>      React.createElement('h3', {<br>        className: "text-xl font-bold mb-4 transition-colors",<br>        style: { color: 'var(--text-primary)' }<br>      }, "üè¢ Department Spending"),<br>      React.createElement('div', { style: { height: '300px' } },<br>        React.createElement('canvas', { id: "departmentChart" })<br>      )<br>    ),<br><br>    // Status Distribution<br>    React.createElement('div', {<br>      className: "p-6 rounded-lg transition-colors",<br>      style: {<br>        backgroundColor: 'var(--bg-primary)',<br>        borderColor: 'var(--border-color)',<br>        boxShadow: 'var(--shadow-md)'<br>      }<br>    },<br>      React.createElement('h3', {<br>        className: "text-xl font-bold mb-4 transition-colors",<br>        style: { color: 'var(--text-primary)' }<br>      }, "üìä Status Distribution"),<br>      React.createElement('div', { style: { height: '300px' } },<br>        React.createElement('canvas', { id: "statusChart" })<br>      )<br>    ),<br><br>    // Duration Analysis<br>    React.createElement('div', {<br>      className: "p-6 rounded-lg transition-colors",<br>      style: {<br>        backgroundColor: 'var(--bg-primary)',<br>        borderColor: 'var(--border-color)',<br>        boxShadow: 'var(--shadow-md)'<br>      }<br>    },<br>      React.createElement('h3', {<br>        className: "text-xl font-bold mb-4 transition-colors",<br>        style: { color: 'var(--text-primary)' }<br>      }, "‚è±Ô∏è Avg Duration by Stage"),<br>      React.createElement('div', { style: { height: '300px' } },<br>        React.createElement('canvas', { id: "durationChart" })<br>      )<br>    )<br>  ),<br><br>  // Loading State<br>  loading && React.createElement('div', {<br>    className: "flex items-center justify-center py-12"<br>  },<br>    React.createElement('div', { className: "text-center" },<br>      React.createElement('div', {<br>        className: "animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",<br>        style: { borderColor: '#0070AF' }<br>      }),<br>      React.createElement('p', {<br>        className: "transition-colors",<br>        style: { color: 'var(--text-secondary)' }<br>      }, "Loading analytics...")<br>    )<br>  )<br>);<br></code></pre><br><br>---<br><br><h2>Integration Steps</h2><br><br><ul><li><strong>Add API methods</strong> to the <code>api</code> object (around line 700-800)</li></ul><br><ul><li><strong>Add chart helper functions</strong> before component definitions (around line 990)</li></ul><br><ul><li><strong>Create <code>AnalyticsDashboard</code> component</strong> (around line 3150, after Reports)</li></ul><br><ul><li><strong>Update App component</strong> to render AnalyticsDashboard when <code>view === 'analytics'</code></li></ul><br><ul><li><strong>Add menu item</strong> in Sidebar for Analytics (or replace Reports)</li></ul><br><br>---<br><br><h2>Testing</h2><br><br><ul><li>Login as Finance Manager (sarah.banda / password123)</li></ul><br><ul><li>Click "Analytics" or "Reports" in sidebar</li></ul><br><ul><li>Verify charts render correctly</li></ul><br><ul><li>Test filters (date range, department, period)</li></ul><br><ul><li>Check light/dark mode compatibility</li></ul><br><ul><li>Verify data accuracy</li></ul><br><br>---<br><br><h2>Next Steps After Implementation</h2><br><br><ul><li>Add export functionality (PDF/Excel)</li></ul><br><ul><li>Add drill-down click handlers</li></ul><br><ul><li>Implement approval funnel visualization</li></ul><br><ul><li>Add vendor analytics</li></ul><br><ul><li>Create comparative period analysis</li></ul><br><ul><li>Add alert thresholds</li></ul><br><ul><li>Implement scheduled reports</li></ul><br><br>---<br><br><h2>Current Files</h2><br><br><ul><li><strong>Backend:</strong> <code>backend/server.js</code> (Analytics endpoints lines 1938-2326)</li></ul><br><ul><li><strong>Frontend:</strong> <code>frontend/app.js</code> (Need to add AnalyticsDashboard component)</li></ul><br><ul><li><strong>HTML:</strong> <code>frontend/index.html</code> (Chart.js already loaded line 16)</li></ul><br><br>---<br><br><strong>Status:</strong> Ready for frontend implementation<br><strong>Estimated Time:</strong> 2-3 hours for full dashboard<br><strong>Priority:</strong> High - Significant business value for Finance/MD<br>
</body>
</html>